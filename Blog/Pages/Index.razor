@page "/"

@inject IJSRuntime JS

<PageTitle>Index</PageTitle>

<AuthorizeView>

    <Authorized>
        <h1>Hello, @context.User.Identity.Name!</h1>
    </Authorized>
    
    <NotAuthorized>
        <h1>Hello, Guest!</h1>
    </NotAuthorized>

</AuthorizeView>


<AuthorizeView>
    <Authorized>
       <br /><br />
       <button class="btn btn-outline-primary" @onclick-"DisplayGreetingAlert"> Display greeting alert</button>
    </Authorized>
</AuthorizeView>


@code{
    [CascadingParameter]
    private Task<AuthenticationState> authenticationState{ get; set; }

    private async Task DisplayGreetingAlert()
    {
        var authState = await authenticationState;
        var message = $"hello {authenticationState.Result.User.Identity.Name}";
        JS.InvokeVoidAsync("alert", message);
    }

}